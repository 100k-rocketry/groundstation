\documentclass[10pt,draftclsnofoot,onecolumn]{IEEEtran}
\hyphenation{op-tical net-works semi-conduc-tor}

\usepackage[margin=.75in]{geometry}
\usepackage{courier}
\usepackage{ifthen}
\usepackage{setspace}
\usepackage{listings}
\usepackage[usenames, dvipsnames]{color}
\usepackage{tabularx}
\usepackage[strict]{chngpage}
\usepackage{cite}
\usepackage{graphicx}
\usepackage{acronym}
\usepackage{color}
\usepackage{makeidx}
\usepackage{url}

\makeindex

\acrodef{NPM}[NPM]{Node Package Manager}
\acrodef{OSU}[OSU]{Oregon State University}
\acrodef{AIAA}[AIAA]{American Institute of Aeronautics and Astronautics}

\lstset {
	language=C,
	basicstyle=\ttfamily,
	keywordstyle=\color{blue}\ttfamily,
	stringstyle=\color{red}\ttfamily,
	commentstyle=\color{OliveGreen}\ttfamily,
	morecomment=[l][\color{magenta}]{\#}
	showstringspaces=false,
	showspaces=false,
	frame=single,
	captionpos=b
}

\newcommand{\commandline}[2][\empty] {
	\begin{quote}
		\texttt{#2}
		\ifthenelse{\equal{#1}{\empty}}{}{\begin{quote}#1\end{quote}}
	\end{quote}
}

\newcommand{\sigline}[1][\empty] {
	\vspace{1in}
	\hrule width0.5\textwidth
	\vspace{1mm}
	\noindent #1	
}

\newcommand*{\SignatureAndDate}[1]{
	\vspace{1in}
	\par\noindent\makebox[2.5in]{\hrulefill} \hspace{.5in} \makebox[2.0in]{\hrulefill}
	\par\noindent\makebox[2.5in][l]{#1}      \hspace{.5in} \makebox[2.0in][l]{Date}
}

\newcommand{\newentity}[5]{
	\begin{minipage}{\linewidth}
	\noindent\textbf{#2}
	
	\noindent Entity
	
	\noindent\textit{Author:} {#1}
		
	\noindent\textit{Type:} {#3}
	
	\noindent\textit{Purpose:} {#4}
	
	\noindent\textit{Contents:} {#5}
	\vspace{.5cm}
	\end{minipage}
}

\newcommand{\newrelationship}[4]{
	\begin{minipage}{\linewidth}
	\noindent\textbf{#2}
	
	\noindent Relationship
	
	\noindent\textit{Author:} #1

	\noindent\textit{Type:} #3

	\noindent\textit{Contents:} #4
	\vspace{.5cm}
	\end{minipage}
}

\newcommand{\newconstraint}[6]{
	\subsection{Constraint} (Author: #1)
	\subsubsection{Name}
	#2
	\subsubsection{Type}
	#3
	\subsubsection{Source}
	#4
	\subsubsection{Target}
	#5
	\subsubsection{Contents}
	#6
}

\newcommand{\newattribute}[5]{
	\subsection{Attribute} (Author: #1)
	\subsubsection{Name}
	#2
	\subsubsection{Type}
	#3
	\subsubsection{Purpose}
	#4
	\subsubsection{Contents}
	#5	
}


\newcommand{\entityref}[2]{
	\begin{minipage}{\linewidth}
	\textbf{#1}
	
	Entity
	
	See \textit{#2}
	\end{minipage}
	\vspace{.5cm}
}



\begin{document}
	\singlespace
	
	\title{\vspace{2in}Design}
	
	\author {
		Anisimova, Natasha
		\and
		Lee, Terrance
		\and
		Morgan, Albert
	}
	
	\markboth{CS Capstone 2016-2017}{Groundstation}
	
	\pagestyle{empty}
	\vspace*{2in}
	\begin{center}
		\huge
		Groundstation: Design\\
		\normalsize
		\vspace{5mm}
		\textbf{
			Team \#25\\
			High-Altitude Rocketry Challenge\\
		}
		\vspace{1mm}
		Natasha Anisimova\\
		Terrance Lee\\
		Albert Morgan
	\end{center}
	
	\vspace{5mm}
	
	\begin{center}
		\textbf{Abstract}
	\end{center}
	
	%\begin{adjustwidth}{0.75in}{0.75in}
	
	%Abstract goes here
	The \textit{Groundstation} software will collect telemetry from a rocket while is in flight and graphically display the telemetry in real-time. Groundstation is made up several different components: collection of data, storage of data, interpolation of data, and 
	display of data.	
	This document will describe in detail the design of Groundstation.
	%\end{adjustwidth}
		
	\pagestyle{headings}
	
	\newpage

	% Uncomment this to make the table of contents	
	\tableofcontents
	\newpage

	\section{Introduction}

	\subsection{Identification}
	This document will provide and in-depth software design description of the Groundstation software package.
	
	\subsection{Date of Issue}
	This document is issued on December 2, 2016.
	At this time, the design of the software is complete, but no work has begun on the implementation.
	
	\subsection{Scope}
	This document will provide details about the Groundstation software package.
	The concerns of the software will begin when the telemetry is received via the serial port on the Raspberry Pi.
	Collecting the data from the rocket and converting it into a protocol readable through the serial port is the
	concern of the \ac{OSU} \ac{AIAA} High-Alititude Rocketry Team avionics section.
		
	\subsection{Stakeholders}
	The stakeholders of the Groundstation software package are members of the \ac{OSU} \ac{AIAA} High-Altitude Rocketry Team.
	The \ac{OSU} \ac{AIAA} High-altitude rocketry team is a group of multidisciplinary engineering students who are working to together to build the rocket.
	The stakeholders require the ability to:
	\begin{itemize}
		\item View the telemetry in real time in order to track the altitude and aid in recovery
		\item View the data graphically so that it is easy to understand
		\item Log the data so that it may be analyzed at a later date
	\end{itemize}

	\section{Structure View}
		
	
	
	% LOOK AT MY NEWELEMENT COMMAND EXAMPLEHERE
	

	\newentity
	{Your name here}
	{PC}
	{Component}
	{Why does it exists?}
	{I'M MAKING CHANGES!}

	\newentity
	{Albert Morgan}
	{Package Manager}
	{Subprogram}
	{
		The package manager will install, track, and update software dependencies on the server.
	}
	{
		Because Groundstation will be using Node and JavaScript for both the frontend and backend, \ac{NPM} will be used~\cite{npm}. \ac{NPM} has a large repository of both server-side and client-side JavaScript packages.
	}
	
	\index{Visualization}
	\index{JavaScript}
	\index{3.js}
	\index{Frontend}
	\index{WebGL}
	\newentity
	{Natasha Anisimova}
	{Frontend}
	{Component}
	{User Interface}
	{
		The frontend of the web server will create and display the information that it was given by the backend. Given
		that the information has to do with location: longitude, latitude, and altitude, a 3D display is prefered. The
		frontend will consist of programs using 3.js and WebGL to create the vizualization necessary to quickly understand the
		location of the rocket.
	}

	\index{Backend}
	\newentity
	{Albert Morgan}
	{Backend}
	{Component}
	{
		The purpose of the backend is the facilitate communication between the rocket and the user.
	}
	{
		The backend takes care of all data collection, transformation, logging, and serving that data to the user.
		A Node server will handle reading the data from the serial port, transforming the data into JSON,
		storing the data, and making the data available to the user.
	}

	\index{Node}
	\index{Backend}
	\index{PHP}
	\index{Ruby}
	\index{Raspberry Pi}
	\newentity
	{Albert Morgan}
	{Node}
	{Subprogram}
	{Node is the software that runs the backend.}
	{
		The backend will run on Node. Several choices were considered to run the backend, particularly Node, PHP, and Ruby.
		The backend was chosen two criteria:
		\begin{itemize}
			\item Speed. The backend will run on a Raspberry Pi, so speed is important to minimize the system resources used.
			\item Interoperability. The backend needs to work with multiple components, including the logging software, the data coming in from the serial port, serving the frontend to the user.
		\end{itemize}
		Node uses an event driven architecture, which is ideal for reading data from the serial port.
		PHP and Ruby on Rails are both HTML preprocessors, so they don't get activated until the web site is requested.
		Node, on the other hand, runs continuously in the background and uses an event driven architecture.
		The event driven architecture is ideal for reading the data from the serial port.
		Additionally, Node much faster than either ruby or PHP.	
	}

	\newentity
	{Your name here}
	{Serialport}
	{Library}
	{Node serialport library}
	{Stuff here.}

	\index{Log}
	\index{JSON}
	\newentity
	{Albert Morgan}
	{Log}
	{Data store}
	{Store the data in non-volatile storage for later retrieval and update new connecting clients}
	{
		Groundstation will store telemetry in JSON format.
		The log should limit the possibility of the corruption of the data due to a programming error
		and make the data easily accessible for newly connecting clients.
		Several choices were considered for the logging, including relational databases, JSON documents, and logging the telemetry.
		A relational database would be unnecessary because the data does not have any relations that need to be tracked;
		each telemetry packet is an independent piece of information.
		Logging the telemetry as it comes in from the rocket would limit the possibility of corruption.
		A programming error in the JSON parsing routines could cause all of the data to be unusable.
		However, storing the data in JSON format would make it very easy for new clients that connect to the server in the middle of the rocket flight to be updated with all of the past data.
		For this reason, the telemetry will be stored in a JSON format.
	}
	
	
	\newentity
	{Your name here}
	{jQuery}
	{Libary}
	{UI stuff}
	{Queries the J}
	
	\index{Visualization}
	\index{JavaScript}
	\index{User Interface}
	\index{WebGL}
	\index{Web browser}
	\newentity
	{Natasha Anisimova}
	{3.js}
	{Libary}
	{3.js is a JavaScript 3D library used to create and display animated 3D computer graphics using WebGL.}
	{	Since the information about the rocket will be displayed by using a web browser through a local Wi-Fi network, 
		making sure the information is displayed on time and correctly is crucial. 3.js allows for easy and rapid development
		of WebGL applications, which means we can make the most of the specialised graphics hardware on the users'
		PCs that it gives access to.
	}

	\index{Rocket}
	\index{Longitude}
	\index{Latitude}
	\index{Altitude}
	\newentity
	{Natasha Anisimova}
	{Rocket}
	{Component}
	{Physical manifestation of the object being tracked.}
	{
		The rocket will have sensors attached to it that will transmit information about its altitude, GPS coordinates, tilt.
		While the rocket is on its journey the GPS signal will cut out due to US government laws meaning that the longitude
		and latitude will have to be calculated based upon the other information that is recieved. 
	}
	
	\index{Web server}
	\index{Raspberry Pi}
	\index{JSON}
	\index{Telemetry}
	\newentity
	{Albert Morgan}
	{Web server}
	{Part}
	{	The web server will serve three primary functions:
		\begin{itemize}
		\item Server web pages to the clients.
		\item Receive telemetry from the serial port and convert it into json.
		\item Make the JSON data available to the clients.
		\end{itemize}
	}
	{
		The web server needs to be stable so that there is no data loss during the flight.
		Additionally, the web server should be as lightweight as possible to minimize the resource consumption on the Raspberry Pi.
		Groundstation will use the Apache~\cite{apache} web server.
		This web server was chosen over other options primary for it's stability.
		Apache uses a one-thread-per-connection model, so if one thread crashes, it will not affect the rest of the connections.
		NGINX~\cite{nginx} was also considered. On large-scale servers, it is much more lightweight because it uses a many-connections-per-thread
		model. However, the number of connections will be small and the reuse of threads could reduce stability.
		Lighttpd~\cite{lighttpd} was also considered. Although Lighttpd is much more lightweight than Apache,
		it is not nearly as mature.
		Because stability is a primary concern, Apache was selected.
	}

	\index{Web browser}
	\index{Chrome}
	\index{Edge}
	\index{Firefox}
	\index{Safari}
	\newentity
	{Albert Morgan}
	{Web browser}
	{Process}
	{The web server}
	{	The client will use a web browser to connect to the Groundstation web server and access the content.
		The web browser may be any of:
		\begin{itemize}
			\item Chrome version 54 or higher
			\item Edge version 14 or higher
			\item Firefox version 49 or higher
			\item Safari version 10 or higher
		\end{itemize}
	}

	\index{Web browser}
	\index{Web server}
	\newrelationship
	{Albert Morgan}
	{Web browser / Web server}
	{Connected}
	{The web browser connects to the web server over a WiFi network via the HTTP protocol.}
	
	\newrelationship
	{Natasha Anisimova}
	{Frontend / Backend}
	{Connected}
	{The Frontend will take what the Backend of the software gives it and use 3.js to create and display information to the user.}
	
	\newrelationship
	{Your name here}
	{jQuery composition}
	{Composition}
	{Stuff}
	
	\newrelationship
	{Natasha Anisimova}
	{3.js}
	{Part of}
	{The JavaScript Library 3.js will be used with WebGL to create the Frontend of Groundstation.}
	
	\index{Node}
	\index{Backend}
	\newrelationship
	{Albert Morgan}
	{Node / Backend}
	{Part of}
	{	Node is used by the backend to do the majority of the work.
		Node is responsible for receiving, transforming, logging, and sending the telemetry to the user.
	}
	
	\newrelationship
	{Your name here}
	{Serialport use}
	{Use}
	{Stuff}
	
	\index{Log}
	\index{Backend}
	\newrelationship
	{Albert Morgan}
	{Log / Backend}
	{Part of}
	{
		The log is part of the backend, and will be written to by and exist on the same device that runs the backend.
	}
	
	\newrelationship
	{Albert Morgan}
	{Backend / Rocket}
	{Connected}
	{The back end will retrieve data from the rocket through the serial port.
		The exact protocol used will be determined at a later date by the \ac{OSU} \ac{AIAA}
		High-Altitude Rocketry avionics team.
	}
	
	\newrelationship
	{Your name here}
	{NPM / Frontend}
	{Connected}
	{NPM will be used to install all frontend software dependencies.}
	
	\index{NPM}
	\index{Backend}
	\newrelationship
	{Albert Morgan}
	{NPM / Backend}
	{Part of}
	{NPM is part of the backend, and will be used to update and install all backend software dependencies.}


	% INTERACTION SECTION
	\index{Interaction}
	\section{Interaction}

	\entityref{Rocket}
	{Structure View - Rocket}
	
	\entityref{Backend}
	{Structure View - Backend}
	
	
	\section{Algorithm}
	Stuff about the event-driven architecture maybe.

	\section{Glossary}
		\begin{itemize}
		\index{Accuracy}
		\item \textbf{Accuracy:} The absence of errors in the telemetry GS receives, logs, and displays.
		\index{Binary data}
		\item \textbf{Binary data:} Telemetry that represents one of two states, for example, ``stage 2 activated'' and
		``stage 2 not activated.''
		\index{Corruption}
		\item \textbf{Corruption:} The process by which data is altered or made unreadable.
		\index{Crash}
		\item \textbf{Crash:} A software crash; the event in which a piece of software ceases operation unexpectedly.
		\index{Die}
		\item \textbf{Die:} A process dies when it ceases operation and is removed by the operating system.
		The difference between dying and crashing is that a crash may cause the program to become non-responsive,
		whereas dying causes the process to end.
		\index{Groundstation}
		\index{GS}
		\item \textbf{GS:} Groundstation, the name of our software.
		\index{Graphical display}
		\item \textbf{Graphical display:} Data that is displayed using a visualization.
		\index{Live}
		\item \textbf{Live:} Updated in real-time.
		\index{Non-volatile storage}
		\index{Storage}
		\item \textbf{Non-volatile storage:} Storage that will not be erased when the system is powered down.
		For example, a hard drive or flash storage.
		\index{Page}
		\item \textbf{Page:} A web page that users of GS may connect to in order to view the telemetry.
		\index{Process}
		\item \textbf{Process:} A running program on a computer.
		%\index{Lean angle}
		%\item \textbf{Lean angle:} The angle relative to the vertical that the rocket is currently traveling.
		\index{Raspberry Pi}
		\item \textbf{Raspberry Pi:} A small, inexpensive computing platform.		
		\index{Real-time}
		\item \textbf{Real-time:} Each telemetry datum received from the rocket must be processed and
		displayed in under one second.
		\index{Redundant sensors}
		\item \textbf{Redundant sensors:} Two or more sensors that provide the same type of data.
		\index{Reliability}
		\item \textbf{Reliability:} In the event of a software crash, the Groundstation software should automatically
		start and begin all normal functions in under five seconds.
		\index{Robustness}
		\item \textbf{Robustness:} In the event that GS receives data that is garbled or otherwise does not adhere
		to the protocol, it must continue to receive and display data and not break the real-time requirement.
		\index{Storage}
		\item \textbf{Storage:} A device where data is logged.		
		\index{Telemetry}
		\item \textbf{Telemetry:} Data received from the rocket while the rocket is in flight.
		\index{Telemetry packet}
		\index{Packet}
		\item \textbf{Telemetry packet:} The rocket will send a telemetry update once per second. Each one of these updates is a ``telemetry packet.''
		\index{Vizualation}
		\item \textbf{Visualization:} Information or data, transformed into an visual context.
	\end{itemize}

	\printindex

\bibliography{groundstation}
\bibliographystyle{IEEEtran}

\newpage
\begin{minipage}{\textwidth}	
	\SignatureAndDate{Nancy Squires}
	\SignatureAndDate{Natasha Anisimova}
	\SignatureAndDate{Terrance Lee}
	\SignatureAndDate{Albert Morgan}
\end{minipage}

\end{document}
